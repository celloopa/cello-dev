---
interface MediaItem {
	src: string;
	alt?: string;
	caption?: string;
}

interface Props {
	items: MediaItem[];
}

const { items } = Astro.props;
const isVideo = (src: string) => src?.endsWith('.webm') || src?.endsWith('.mp4');
---

<div class="media-gallery media-two">
	{items.map((item, index) => (
		<figure class="media-item" style={`--i: ${index}`}>
			{isVideo(item.src) ? (
				<video src={item.src} class="project-media" autoplay loop muted playsinline />
			) : (
				<img src={item.src} alt={item.alt || ""} class="project-media" />
			)}
			{item.caption && <figcaption>{item.caption}</figcaption>}
		</figure>
	))}
</div>

<style>
	.media-gallery {
		margin: 2rem 0;
		animation: scaleIn 0.7s cubic-bezier(0.16, 1, 0.3, 1) backwards;
	}

	.media-two {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: 1rem;
	}

	.media-item {
		margin: 0;
		animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) backwards;
		animation-delay: calc(var(--i) * 0.1s);
	}

	.media-item figcaption {
		font-size: 0.85rem;
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		color: var(--color-text);
		padding: 0.75rem 0;
		border-bottom: 2px solid var(--color-accent);
		margin: 0;
	}

	.project-media {
		width: 100%;
		border: 4px solid var(--color-text);
		filter: grayscale(20%);
		transition: filter 0.3s ease;
		aspect-ratio: 16/10;
		object-fit: cover;
	}

	video.project-media {
		height: auto;
		aspect-ratio: auto;
	}

	.project-media:hover {
		filter: grayscale(0%);
	}

	@keyframes scaleIn {
		from {
			opacity: 0;
			transform: scale(0.95);
		}
		to {
			opacity: 1;
			transform: scale(1);
		}
	}

	@keyframes slideUp {
		from {
			opacity: 0;
			transform: translateY(30px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	@media (width <= 700px) {
		.media-two {
			grid-template-columns: 1fr;
		}
	}
</style>
